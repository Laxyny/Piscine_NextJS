# Cahier des charges complÃ©mentaire â€“ Extension Authentification & Backend Cloud

## Objectif pÃ©dagogique (extension)
Cette extension a pour objectif de faire Ã©voluer le projet Chat Web existant vers une application plus proche des standards professionnels, en :

- remplaÃ§ant SQLite par un backend cloud (Supabase ou Firebase)
- introduisant une authentification complÃ¨te et sÃ©curisÃ©e
- gÃ©rant des utilisateurs rÃ©els et leurs donnÃ©es associÃ©es

ğŸ‘‰ Le projet Chat Web existant sert de base. Il sâ€™agit dâ€™une extension, pas dâ€™un nouveau projet.

## Contexte pÃ©dagogique
Les Ã©tudiants ont dÃ©jÃ  dÃ©veloppÃ© :

- une application de chat IA fonctionnelle
- une API backend en Next.js
- une base de donnÃ©es SQLite avec Prisma
- une interaction frontend / backend maÃ®trisÃ©e

Lâ€™objectif est maintenant de :

- migrer vers une solution backend moderne
- comprendre les enjeux de lâ€™authentification
- sÃ©curiser lâ€™accÃ¨s aux donnÃ©es
- gÃ©rer des utilisateurs authentifiÃ©s

## Principe gÃ©nÃ©ral de lâ€™extension
Lâ€™application doit dÃ©sormais :

- permettre Ã  un utilisateur de sâ€™inscrire et se connecter
- associer les messages de chat Ã  un utilisateur authentifiÃ©
- stocker les donnÃ©es dans une base distante sÃ©curisÃ©e
- protÃ©ger les routes API

Le chat IA reste la fonctionnalitÃ© centrale.

## Technologies imposÃ©es (extension)
Les Ã©tudiants doivent utiliser une seule des deux solutions suivantes :

### Option A â€“ Supabase (recommandÃ©e)
- Supabase Auth
- Supabase Database (PostgreSQL)
- Client JavaScript Supabase

### Option B â€“ Firebase
- Firebase Authentication
- Firestore ou Realtime Database
- SDK JavaScript Firebase

âš ï¸ SQLite et Prisma ne doivent plus Ãªtre utilisÃ©s.

## Authentification â€“ FonctionnalitÃ©s attendues
Lâ€™application doit proposer au minimum :

### 1. Inscription et connexion
- crÃ©ation de compte par email + mot de passe
- connexion utilisateur
- dÃ©connexion

### 2. MÃ©thodes dâ€™authentification avancÃ©es (au moins une)
Les Ã©tudiants doivent implÃ©menter au moins une des mÃ©thodes suivantes :

- Social login (Google, GitHub, etc.)
- OAuth2
- OTP par email
- TOTP (application dâ€™authentification)

### Gestion des utilisateurs
Chaque utilisateur authentifiÃ© doit avoir :

- un identifiant unique
- un email
- une date de crÃ©ation

Les messages de chat doivent Ãªtre liÃ©s Ã  lâ€™utilisateur connectÃ©.

## Base de donnÃ©es (migration)

### DonnÃ©es Ã  stocker
La base distante doit contenir :

- utilisateurs
- messages de chat
    - contenu
    - rÃ´le (user / assistant)
    - date
    - identifiant utilisateur

### RÃ¨gles de sÃ©curitÃ©
- un utilisateur ne peut accÃ©der quâ€™Ã  ses propres messages
- les rÃ¨gles de sÃ©curitÃ© (policies / rules) doivent Ãªtre configurÃ©es

## Backend â€“ Ã‰volutions attendues

### API Routes sÃ©curisÃ©es
Les routes API doivent :

- vÃ©rifier que lâ€™utilisateur est authentifiÃ©
- refuser les requÃªtes non authentifiÃ©es
- utiliser le token fourni par Supabase/Firebase

Exemple de route protÃ©gÃ©e :

```
POST /api/chat
```

## Frontend â€“ Ã‰volutions attendues
Le frontend doit proposer :

- une page de connexion / inscription
- un Ã©tat utilisateur global (connectÃ© / non connectÃ©)
- un accÃ¨s au chat uniquement aprÃ¨s authentification
- lâ€™affichage de lâ€™historique utilisateur

Lâ€™interface peut rester simple.

## Contraintes techniques
- JavaScript uniquement
- Next.js (App Router)
- React
- API Routes Next.js
- Supabase ou Firebase (pas les deux)
- une seule application
- un seul Dockerfile
- aucune base de donnÃ©es locale

## Livrables attendus (extension)
Les Ã©tudiants doivent fournir :

- le code source mis Ã  jour
- la configuration Supabase ou Firebase
- une mise Ã  jour du `README.md` expliquant :
    - la migration SQLite â†’ cloud
    - les mÃ©thodes dâ€™authentification implÃ©mentÃ©es
    - les rÃ¨gles de sÃ©curitÃ©

## CritÃ¨res dâ€™Ã©valuation
Le projet sera Ã©valuÃ© selon :

- la rÃ©ussite de la migration des donnÃ©es
- le bon fonctionnement de lâ€™authentification
- la sÃ©curitÃ© des accÃ¨s
- lâ€™intÃ©gration propre au projet existant
- la lisibilitÃ© du code
- la qualitÃ© de la documentation

## Objectif final de lâ€™extension
Ã€ la fin de cette extension, les Ã©tudiants doivent Ãªtre capables de :

- migrer une application vers un backend cloud
- mettre en place une authentification moderne
- sÃ©curiser des donnÃ©es utilisateur
- comprendre les enjeux rÃ©els de la sÃ©curitÃ© web

Cette extension reprÃ©sente une Ã©tape clÃ© vers un projet full-stack professionnel.
